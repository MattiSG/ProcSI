<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Émulateur PROCSI: src/parser.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>src/parser.c File Reference</h1><code>#include &quot;<a class="el" href="parser_8h-source.html">parser.h</a>&quot;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>

<p>
<a href="parser_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__LblListElm.html">_LblListElm</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structParser.html">Parser</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a> { <a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45b70820071c09faba9b7fd45dd8dfc0b8">PM_REG</a>, 
<a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45e982f9b8535267fdc9626f66bc81b115">PM_IMM</a>, 
<a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45c1bdcdc88b9ae248da81b5ef68fa953c">PM_IND</a>, 
<a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45aeae8793d5f148e7b807d2a96639fc2b">PM_DIR</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="instructions_8h.html#1a6b6fb557d8d37d59700faf4e4c9167">mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#f8b3df01c4527983cf58ebfaa51a76d9">pseudomode_to_mode</a> (<a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a> spmode, <a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a> dpmode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#0aae705affc545bd5a7bc6280c9c2ad4">sivm_parse_file</a> (int *memsize, <a class="el" href="unioncmd__word.html">cmd_word</a> *mem[], char *file)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#9b4d2fafe12c36e22e1357aaf6834200">iswhitespace</a> (char c)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#a9f3912496e667051bc1f8572032623c">ascii2base</a> (char ascii, int base)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#d0edda509e135d6f8574b9e03a6fe98b">parse_number</a> (<a class="el" href="structParser.html">Parser</a> *parser, int *value, bool modifiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#935a281880c201c49015e695f228398c">parse_attrib</a> (<a class="el" href="structParser.html">Parser</a> *parser, <a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a> *pmode, int *data, int *reg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#de23584cad7dca7ebf094dfa92eb841e">parse_1attrib</a> (<a class="el" href="structParser.html">Parser</a> *parser, <a class="el" href="unioncmd__word.html">cmd_word</a> m[3], unsigned int *instrsize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#eb383aaeb787147d777cc7059927262e">parse_2attribs</a> (<a class="el" href="structParser.html">Parser</a> *parser, <a class="el" href="unioncmd__word.html">cmd_word</a> m[3], unsigned int *instrsize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#db1c2d2598ce8661f7d6c0f0a1b2437a">parse_pass_line</a> (<a class="el" href="structParser.html">Parser</a> *parser, char *line)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#a341f2e0c8b78613cec8690d74746537">parse_first_pass</a> (<a class="el" href="structParser.html">Parser</a> *parser)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#5b1913b2e355b06019b4221429e1359f">parse_second_pass</a> (<a class="el" href="structParser.html">Parser</a> *parser)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="parser_8c.html#776cf177811f3a5d5c4192d008837df9">sivm_parse</a> (int *memsize, <a class="el" href="unioncmd__word.html">cmd_word</a> *mem[], char *str)</td></tr>

</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="636b03052d93d0ff0ebb0236c4702975"></a><!-- doxytag: member="parser.c::LblListElm" ref="636b03052d93d0ff0ebb0236c4702975" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__LblListElm.html">_LblListElm</a> <a class="el" href="struct__LblListElm.html">LblListElm</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Chained list of labels Helps the assembleur to remember at which address labels are located. A label is caractised by it's name, and it's address (or pointer) 
<p>Definition at line <a class="el" href="parser_8c-source.html#l00011">11</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="c3b31479b5dc150f613dbe3ff9096d45"></a><!-- doxytag: member="parser.c::PMode" ref="c3b31479b5dc150f613dbe3ff9096d45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pseudo-modes list Since the parser have to read one instrution's attribute at one, we need to have invidual parameter for theses. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="c3b31479b5dc150f613dbe3ff9096d45b70820071c09faba9b7fd45dd8dfc0b8"></a><!-- doxytag: member="PM_REG" ref="c3b31479b5dc150f613dbe3ff9096d45b70820071c09faba9b7fd45dd8dfc0b8" args="" -->PM_REG</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="c3b31479b5dc150f613dbe3ff9096d45e982f9b8535267fdc9626f66bc81b115"></a><!-- doxytag: member="PM_IMM" ref="c3b31479b5dc150f613dbe3ff9096d45e982f9b8535267fdc9626f66bc81b115" args="" -->PM_IMM</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="c3b31479b5dc150f613dbe3ff9096d45c1bdcdc88b9ae248da81b5ef68fa953c"></a><!-- doxytag: member="PM_IND" ref="c3b31479b5dc150f613dbe3ff9096d45c1bdcdc88b9ae248da81b5ef68fa953c" args="" -->PM_IND</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="c3b31479b5dc150f613dbe3ff9096d45aeae8793d5f148e7b807d2a96639fc2b"></a><!-- doxytag: member="PM_DIR" ref="c3b31479b5dc150f613dbe3ff9096d45aeae8793d5f148e7b807d2a96639fc2b" args="" -->PM_DIR</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00089">89</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a9f3912496e667051bc1f8572032623c"></a><!-- doxytag: member="parser.c::ascii2base" ref="a9f3912496e667051bc1f8572032623c" args="(char ascii, int base)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ascii2base           </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>ascii</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>base</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00180">180</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00202">parse_number()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9b4d2fafe12c36e22e1357aaf6834200"></a><!-- doxytag: member="parser.c::iswhitespace" ref="9b4d2fafe12c36e22e1357aaf6834200" args="(char c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iswhitespace           </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>c</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00175">175</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00338">parse_1attrib()</a>, <a class="el" href="parser_8c-source.html#l00386">parse_2attribs()</a>, <a class="el" href="parser_8c-source.html#l00256">parse_attrib()</a>, and <a class="el" href="parser_8c-source.html#l00452">parse_pass_line()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ce9d770a57a3ad379191f3aedf2eaa17"></a><!-- doxytag: member="parser.c::lbllist_add" ref="ce9d770a57a3ad379191f3aedf2eaa17" args="(LblListElm *head, REG ptr, char *name, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__LblListElm.html">LblListElm</a>* lbllist_add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__LblListElm.html">LblListElm</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sivm_8h.html#9e9b08bbbfb50d0535079872d3ed87c3">REG</a>&nbsp;</td>
          <td class="paramname"> <em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a label <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>pointer to the head of the list (NULL is empty / no list) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr</em>&nbsp;</td><td>the label's address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>label's name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>len of the label name </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Address to the new head of list </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00026">26</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00013">_LblListElm::name</a>, <a class="el" href="parser_8c-source.html#l00016">_LblListElm::next</a>, and <a class="el" href="parser_8c-source.html#l00014">_LblListElm::pointer</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00594">parse_first_pass()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8d356f4dbbf97215a545c53eb06e2ddb"></a><!-- doxytag: member="parser.c::lbllist_get" ref="8d356f4dbbf97215a545c53eb06e2ddb" args="(LblListElm *head, char *name, size_t len, REG *pointer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbllist_get           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__LblListElm.html">LblListElm</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sivm_8h.html#9e9b08bbbfb50d0535079872d3ed87c3">REG</a> *&nbsp;</td>
          <td class="paramname"> <em>pointer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pick a label element from the list <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>pointer to the head of the list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>label's name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>len of the label name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pointer</em>&nbsp;</td><td>output pointer to label's address </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if element is found and pointer is written. false is no corresponding element found </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00054">54</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00042">lbllist_next()</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00202">parse_number()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d47a814bcef87d393cf1aa168aca5158"></a><!-- doxytag: member="parser.c::lbllist_next" ref="d47a814bcef87d393cf1aa168aca5158" args="(LblListElm *current)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__LblListElm.html">LblListElm</a>* lbllist_next           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__LblListElm.html">LblListElm</a> *&nbsp;</td>
          <td class="paramname"> <em>current</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the next link in the chained list of labels <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>current</em>&nbsp;</td><td>pointer to the element you want to get the next one </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Address of the next element. NULL if end of list </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00042">42</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00016">_LblListElm::next</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00054">lbllist_get()</a>.</p>

</div>
</div><p>
<a class="anchor" name="de23584cad7dca7ebf094dfa92eb841e"></a><!-- doxytag: member="parser.c::parse_1attrib" ref="de23584cad7dca7ebf094dfa92eb841e" args="(Parser *parser, cmd_word m[3], unsigned int *instrsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_1attrib           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncmd__word.html">cmd_word</a>&nbsp;</td>
          <td class="paramname"> <em>m</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>instrsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00338">338</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="sivm_8h-source.html#l00035">cmd_word::brut</a>, <a class="el" href="unioncmd__word.html#73ff98576cfedb0dd51bb3705e65fb39">cmd_word::codage</a>, <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="instructions_8h-source.html#l00048">DIRECT</a>, <a class="el" href="instructions_8h-source.html#l00047">IMMEDIATE</a>, <a class="el" href="instructions_8h-source.html#l00049">INDIRECT</a>, <a class="el" href="parser_8c-source.html#l00175">iswhitespace()</a>, <a class="el" href="sivm_8h-source.html#l00039">cmd_word::mode</a>, <a class="el" href="parser_8c-source.html#l00256">parse_attrib()</a>, <a class="el" href="parser_8c-source.html#l00093">PM_DIR</a>, <a class="el" href="parser_8c-source.html#l00091">PM_IMM</a>, <a class="el" href="parser_8c-source.html#l00092">PM_IND</a>, <a class="el" href="parser_8c-source.html#l00090">PM_REG</a>, <a class="el" href="instructions_8h-source.html#l00046">REGISTER</a>, <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>, and <a class="el" href="sivm_8h-source.html#l00040">cmd_word::source</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00452">parse_pass_line()</a>.</p>

</div>
</div><p>
<a class="anchor" name="eb383aaeb787147d777cc7059927262e"></a><!-- doxytag: member="parser.c::parse_2attribs" ref="eb383aaeb787147d777cc7059927262e" args="(Parser *parser, cmd_word m[3], unsigned int *instrsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_2attribs           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncmd__word.html">cmd_word</a>&nbsp;</td>
          <td class="paramname"> <em>m</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>instrsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00386">386</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="sivm_8h-source.html#l00035">cmd_word::brut</a>, <a class="el" href="unioncmd__word.html#73ff98576cfedb0dd51bb3705e65fb39">cmd_word::codage</a>, <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="sivm_8h-source.html#l00041">cmd_word::dest</a>, <a class="el" href="parser_8c-source.html#l00175">iswhitespace()</a>, <a class="el" href="sivm_8h-source.html#l00039">cmd_word::mode</a>, <a class="el" href="parser_8c-source.html#l00256">parse_attrib()</a>, <a class="el" href="parser_8c-source.html#l00093">PM_DIR</a>, <a class="el" href="parser_8c-source.html#l00091">PM_IMM</a>, <a class="el" href="parser_8c-source.html#l00092">PM_IND</a>, <a class="el" href="parser_8c-source.html#l00090">PM_REG</a>, <a class="el" href="parser_8c-source.html#l00105">pseudomode_to_mode()</a>, <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>, and <a class="el" href="sivm_8h-source.html#l00040">cmd_word::source</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00452">parse_pass_line()</a>.</p>

</div>
</div><p>
<a class="anchor" name="935a281880c201c49015e695f228398c"></a><!-- doxytag: member="parser.c::parse_attrib" ref="935a281880c201c49015e695f228398c" args="(Parser *parser, PMode *pmode, int *data, int *reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_attrib           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a> *&nbsp;</td>
          <td class="paramname"> <em>pmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>reg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses an instruction attribute <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parser</em>&nbsp;</td><td>pointer to the <a class="el" href="structParser.html">Parser</a> structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pmode</em>&nbsp;</td><td>pointer to the mode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reg</em>&nbsp;</td><td>pointer to the register number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>pointer to the data (for direct/immediate modes) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if no attrib can be read </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00256">256</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="parser_8c-source.html#l00175">iswhitespace()</a>, <a class="el" href="parser_8c-source.html#l00202">parse_number()</a>, <a class="el" href="parser_8c-source.html#l00093">PM_DIR</a>, <a class="el" href="parser_8c-source.html#l00091">PM_IMM</a>, <a class="el" href="parser_8c-source.html#l00092">PM_IND</a>, <a class="el" href="parser_8c-source.html#l00090">PM_REG</a>, and <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00338">parse_1attrib()</a>, and <a class="el" href="parser_8c-source.html#l00386">parse_2attribs()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a341f2e0c8b78613cec8690d74746537"></a><!-- doxytag: member="parser.c::parse_first_pass" ref="a341f2e0c8b78613cec8690d74746537" args="(Parser *parser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_first_pass           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses a first time the whole source code for branches <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parser</em>&nbsp;</td><td>pointer to the <a class="el" href="structParser.html">Parser</a> structure </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if any error occurs </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00594">594</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="parser_8c-source.html#l00083">Parser::labels</a>, <a class="el" href="parser_8c-source.html#l00026">lbllist_add()</a>, <a class="el" href="parser_8c-source.html#l00079">Parser::mem</a>, <a class="el" href="parser_8c-source.html#l00080">Parser::memsize</a>, <a class="el" href="parser_8c-source.html#l00452">parse_pass_line()</a>, <a class="el" href="parser_8c-source.html#l00078">Parser::pc</a>, <a class="el" href="parser_8c-source.html#l00081">Parser::program</a>, and <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00684">sivm_parse()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d0edda509e135d6f8574b9e03a6fe98b"></a><!-- doxytag: member="parser.c::parse_number" ref="d0edda509e135d6f8574b9e03a6fe98b" args="(Parser *parser, int *value, bool modifiable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_number           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>modifiable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses a number <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parser</em>&nbsp;</td><td>a pointer to the <a class="el" href="structParser.html">Parser</a> structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>a pointer to an output int </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modifiable</em>&nbsp;</td><td>tells if the numbers base can be modifier (0xY, Yh) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if no number can be read </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00202">202</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00180">ascii2base()</a>, <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="parser_8c-source.html#l00083">Parser::labels</a>, <a class="el" href="parser_8c-source.html#l00054">lbllist_get()</a>, and <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00256">parse_attrib()</a>.</p>

</div>
</div><p>
<a class="anchor" name="db1c2d2598ce8661f7d6c0f0a1b2437a"></a><!-- doxytag: member="parser.c::parse_pass_line" ref="db1c2d2598ce8661f7d6c0f0a1b2437a" args="(Parser *parser, char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_pass_line           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00452">452</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="instructions_8h-source.html#l00016">ADD</a>, <a class="el" href="sivm_8h-source.html#l00035">cmd_word::brut</a>, <a class="el" href="instructions_8h-source.html#l00020">CALL</a>, <a class="el" href="instructions_8c-source.html#l00152">checkModes()</a>, <a class="el" href="unioncmd__word.html#73ff98576cfedb0dd51bb3705e65fb39">cmd_word::codage</a>, <a class="el" href="sivm_8h-source.html#l00038">cmd_word::codeop</a>, <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="instructions_8h-source.html#l00025">HALT</a>, <a class="el" href="parser_8c-source.html#l00175">iswhitespace()</a>, <a class="el" href="instructions_8h-source.html#l00019">JEQ</a>, <a class="el" href="instructions_8h-source.html#l00018">JMP</a>, <a class="el" href="instructions_8h-source.html#l00014">LOAD</a>, <a class="el" href="parser_8c-source.html#l00079">Parser::mem</a>, <a class="el" href="parser_8c-source.html#l00338">parse_1attrib()</a>, <a class="el" href="parser_8c-source.html#l00386">parse_2attribs()</a>, <a class="el" href="parser_8c-source.html#l00078">Parser::pc</a>, <a class="el" href="instructions_8h-source.html#l00023">POP</a>, <a class="el" href="instructions_8h-source.html#l00022">PUSH</a>, <a class="el" href="instructions_8h-source.html#l00021">RET</a>, <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>, <a class="el" href="instructions_8h-source.html#l00015">STORE</a>, and <a class="el" href="instructions_8h-source.html#l00017">SUB</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00594">parse_first_pass()</a>, and <a class="el" href="parser_8c-source.html#l00652">parse_second_pass()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5b1913b2e355b06019b4221429e1359f"></a><!-- doxytag: member="parser.c::parse_second_pass" ref="5b1913b2e355b06019b4221429e1359f" args="(Parser *parser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool parse_second_pass           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParser.html">Parser</a> *&nbsp;</td>
          <td class="paramname"> <em>parser</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses a second time the source, to assemble <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parser</em>&nbsp;</td><td>pointer to the <a class="el" href="structParser.html">Parser</a> structure </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if any error occurs </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00652">652</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00076">Parser::col</a>, <a class="el" href="parser_8c-source.html#l00074">Parser::cur</a>, <a class="el" href="parser_8c-source.html#l00452">parse_pass_line()</a>, <a class="el" href="parser_8c-source.html#l00078">Parser::pc</a>, <a class="el" href="parser_8c-source.html#l00081">Parser::program</a>, and <a class="el" href="parser_8c-source.html#l00075">Parser::row</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00684">sivm_parse()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f8b3df01c4527983cf58ebfaa51a76d9"></a><!-- doxytag: member="parser.c::pseudomode_to_mode" ref="f8b3df01c4527983cf58ebfaa51a76d9" args="(PMode spmode, PMode dpmode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="instructions_8h.html#1a6b6fb557d8d37d59700faf4e4c9167">mode</a> pseudomode_to_mode           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a>&nbsp;</td>
          <td class="paramname"> <em>spmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a>&nbsp;</td>
          <td class="paramname"> <em>dpmode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Transforms two pseudo-modes to a complete mode This function is using switches since we cannot base on cutting the mode in two bits <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>spmode</em>&nbsp;</td><td>source pseudo-mode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dpmode</em>&nbsp;</td><td>destination pseudo-mode </td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd>parser.c::enum <a class="el" href="parser_8c.html#c3b31479b5dc150f613dbe3ff9096d45">PMode</a> <p>
instructions.h::enum <a class="el" href="instructions_8h.html#1a6b6fb557d8d37d59700faf4e4c9167">mode</a> </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A mode ready to be placed into a mot structure </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00105">105</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="instructions_8h-source.html#l00048">DIRECT</a>, <a class="el" href="instructions_8h-source.html#l00042">DIRIMM</a>, <a class="el" href="instructions_8h-source.html#l00043">DIRREG</a>, <a class="el" href="instructions_8h-source.html#l00047">IMMEDIATE</a>, <a class="el" href="instructions_8h-source.html#l00044">INDIMM</a>, <a class="el" href="instructions_8h-source.html#l00049">INDIRECT</a>, <a class="el" href="instructions_8h-source.html#l00045">INDREG</a>, <a class="el" href="parser_8c-source.html#l00093">PM_DIR</a>, <a class="el" href="parser_8c-source.html#l00091">PM_IMM</a>, <a class="el" href="parser_8c-source.html#l00092">PM_IND</a>, <a class="el" href="parser_8c-source.html#l00090">PM_REG</a>, <a class="el" href="instructions_8h-source.html#l00040">REGDIR</a>, <a class="el" href="instructions_8h-source.html#l00039">REGIMM</a>, <a class="el" href="instructions_8h-source.html#l00041">REGIND</a>, <a class="el" href="instructions_8h-source.html#l00046">REGISTER</a>, and <a class="el" href="instructions_8h-source.html#l00038">REGREG</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00386">parse_2attribs()</a>.</p>

</div>
</div><p>
<a class="anchor" name="776cf177811f3a5d5c4192d008837df9"></a><!-- doxytag: member="parser.c::sivm_parse" ref="776cf177811f3a5d5c4192d008837df9" args="(int *memsize, cmd_word *mem[], char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sivm_parse           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>memsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncmd__word.html">cmd_word</a> *&nbsp;</td>
          <td class="paramname"> <em>mem</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parse a procsi assembly source, and loads it in a virtual machine Since mem is allocated in this function, it's up to you to free it when not needed anymore <dl class="see" compact><dt><b>See also:</b></dt><dd>svim_parse_file </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sivm</em>&nbsp;</td><td>a pointer to <a class="el" href="structSIVM.html">SIVM</a> structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>the source code of the program to assemble </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if any error occured (stderr is written in consequence with perror), true if the source is assembled and loaded corretly. </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00684">684</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00079">Parser::mem</a>, <a class="el" href="parser_8c-source.html#l00080">Parser::memsize</a>, <a class="el" href="parser_8c-source.html#l00594">parse_first_pass()</a>, <a class="el" href="parser_8c-source.html#l00652">parse_second_pass()</a>, and <a class="el" href="parser_8c-source.html#l00081">Parser::program</a>.</p>

<p>Referenced by <a class="el" href="parser_8c-source.html#l00152">sivm_parse_file()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0aae705affc545bd5a7bc6280c9c2ad4"></a><!-- doxytag: member="parser.c::sivm_parse_file" ref="0aae705affc545bd5a7bc6280c9c2ad4" args="(int *memsize, cmd_word *mem[], char *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sivm_parse_file           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>memsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncmd__word.html">cmd_word</a> *&nbsp;</td>
          <td class="paramname"> <em>mem</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parse a procsi assembly file, and loads it in a virtual machine Since mem is allocated in this function, it's up to you to free it when not needed anymore <dl class="see" compact><dt><b>See also:</b></dt><dd>svim_parse </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sivm</em>&nbsp;</td><td>a pointer to <a class="el" href="structSIVM.html">SIVM</a> structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>the filename of the source code </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if any error occured (stderr is written in consequence with perror), true if the file is assembled and loaded corretly. </dd></dl>

<p>Definition at line <a class="el" href="parser_8c-source.html#l00152">152</a> of file <a class="el" href="parser_8c-source.html">parser.c</a>.</p>

<p>References <a class="el" href="parser_8c-source.html#l00684">sivm_parse()</a>.</p>

<p>Referenced by <a class="el" href="debugger_8c-source.html#l00082">debugger_new()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jan 30 16:08:03 2009 for Émulateur PROCSI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
